function setIP(e){localStorage.setItem("ip","http://"+e),ons.notification.toast("IP definido",{timeout:15e3})}function setFunc(){null!=document.querySelector("#cozinha")&&("on"==localStorage.getItem("cozinha")?document.querySelector("#cozinha").checked=!0:document.querySelector("#cozinha").checked=!1),null!=document.querySelector("#sala")&&("on"==localStorage.getItem("sala")?document.querySelector("#sala").checked=!0:document.querySelector("#sala").checked=!1),localStorage.setItem("lastup_func",Date.now())}function getFunc(){axios.get(localStorage.getItem("ip")+"/gpio/list").then(function(e){for(i in e.data)4==e.data[i].pin&&(0==e.data[i].status?localStorage.setItem("cozinha","off"):localStorage.setItem("cozinha","on")),17==e.data[i].pin&&(0==e.data[i].status?localStorage.setItem("sala","off"):localStorage.setItem("sala","on"));setFunc()}).catch(function(e){console.log(e),ons.notification.toast("Erro ao acessar dispositivo",{timeout:1500})})}function onkitchen(){"off"==localStorage.getItem("cozinha")&&axios.get(localStorage.getItem("ip")+"/gpio/set",{params:{pin0:4,val0:1}}).then(function(e){console.log(e),getFunc(),ons.notification.toast("Cozinha desligada",{timeout:1500})}).catch(function(e){console.log(e),ons.notification.toast("Erro ao desligar Cozinha",{timeout:1500})}),"on"==localStorage.getItem("cozinha")&&axios.get(localStorage.getItem("ip")+"/gpio/set",{params:{pin0:4,val0:0}}).then(function(e){console.log(e),getFunc(),ons.notification.toast("Cozinha ligada",{timeout:1500})}).catch(function(e){console.log(e),ons.notification.toast(e,{timeout:1500})})}function onliving(){"off"==localStorage.getItem("sala")&&axios.get(localStorage.getItem("ip")+"/gpio/set",{params:{pin1:17,val1:1}}).then(function(e){console.log(e),getFunc(),ons.notification.toast("sala desligada",{timeout:1500})}).catch(function(e){console.log(e),ons.notification.toast("Erro ao desligar sala",{timeout:1500})}),"on"==localStorage.getItem("sala")&&axios.get(localStorage.getItem("ip")+"/gpio/set",{params:{pin1:17,val1:0}}).then(function(e){console.log(e),getFunc(),ons.notification.toast("sala ligada",{timeout:1500})}).catch(function(e){console.log(e),ons.notification.toast(e,{timeout:1500})})}function getInfo(){axios.get(localStorage.getItem("ip")+"/gpio/info").then(function(e){info=e.data,localStorage.setItem("hostname",info.name),sessionStorage.setItem("tempcpu",info.tempcpu),sessionStorage.setItem("memory",info.memory),console.log(info)}).catch(function(e){console.log(e),ons.notification.toast("Erro ao obter informações",{timeout:1500})})}function setInfo(){null!=localStorage.getItem("hostname")&null!=document.querySelector("#hostname")&&(document.querySelector("#hostname").innerText="Host: "+localStorage.getItem("hostname")),null!=sessionStorage.getItem("memory")&null!=document.querySelector("#memory")&&(document.querySelector("#memory").innerText="Memoria: "+100*sessionStorage.getItem("memory")+"%"),null!=sessionStorage.getItem("tempcpu")&null!=document.querySelector("#tempcpu")&&(document.querySelector("#tempcpu").innerText="Temp: "+sessionStorage.getItem("tempcpu")),localStorage.setItem("lastup_info",Date.now())}function setLoop(e){localStorage.setItem("loop",e)}function loopUpdate(){null!=document.querySelector("#cozinha")&&setInterval(function(){"off"===localStorage.getItem("loop")&&clearInterval(),"on"===localStorage.getItem("loop")&&(getInfo(),setInfo(),getFunc())},2e3)}ons.platform.isIPhoneX()&&document.documentElement.setAttribute("onsflag-iphonex-portrait",""),ons.platform.isIPhoneX()&&document.documentElement.setAttribute("onsflag-iphonex-landscape",""),ons.ready(function(){null===localStorage.getItem("ip")&&myNavigator.pushPage("setup.html"),loopUpdate()}),document.addEventListener("dragdown",function(e){(e.target.matches("#card_cozinha")||e.target.matches("#card_sala"))&&(getFunc(),console.log("getFunc")),e.target.matches("#card_info")&&(getInfo(),setInfo())}),document.addEventListener("doubletap",function(e){(e.target.matches("#card_cozinha")||e.target.matches("#card_sala"))&&(getFunc(),console.log("getFunc")),e.target.matches("#card_info")&&(getInfo(),setInfo())}),document.addEventListener("init",function(e){var t=e.target;"setup"===t.id?(null!=localStorage.getItem("ip")&&(document.querySelector("#ipshow").innerText="Ip definido: "+localStorage.getItem("ip")),null!=localStorage.getItem("loop")&"on"==localStorage.getItem("loop")?document.querySelector("#loop").checked=!0:document.querySelector("#loop").checked=!1,t.querySelector("#go-to-main").onclick=function(){setIP(document.querySelector("#ip").value),document.querySelector("#myNavigator").resetToPage("index.html",{data:{title:"Auto"}}).then(getFunc())},document.querySelector("#loop").onchange=function(){setLoop(document.querySelector("#loop").checked?"on":"off"),document.querySelector("#myNavigator").resetToPage("index.html",{data:{title:"Auto"}}).then(getFunc())}):"setup-return"===t.id?(t.querySelector("#go-to-main").onclick=function(){setIP(document.getElementById("ip").value),document.querySelector("#myNavigator").pushPage("index.html",{data:{title:"Auto"}})},t.querySelector("#go-cancel").onclick=function(){document.querySelector("#myNavigator").pushPage("index.html",{data:{title:"Auto"}})}):"index"===t.id&&setFunc()}),window.fn={},window.fn.open=function(){document.querySelector("#menu").open()},window.fn.load=function(e,t){var o=document.querySelector("#myNavigator");document.querySelector("#menu");o.resetToPage(e,t)},window.fn.push=function(e,t){var o=document.querySelector("#myNavigator");document.querySelector("#menu");o.pushPage(e,t)},window.fn.openurl=function(e){myURL=encodeURI(e),window.open(myURL,"_blank")},window.fn.pop=function(){document.querySelector("#myNavigator").popPage()};